&НаКлиенте
Процедура ПриОткрытии(Отказ) 
	ДатаНачала = ТекущаяДата();
	ДатаОкончания = ПолучитьКонстанту();
	ПериодТаймера = ДатаОкончания - ДатаНачала;
	Если ПериодТаймера > 0 Тогда 
	
		 ПодключитьОбработчикОжидания("Таймер",1);
	
	КонецЕсли;

КонецПроцедуры 

Функция ПолучитьКонстанту()

	Возврат Константы.ДатаМероприятия.Получить();

КонецФункции // ПолучитьКонстанту()


&НаКлиенте
Процедура Таймер()
       ПериодТаймера = ДатаОкончания - ТекущаяДата()-604800; 
	   Если ПериодТаймера > 0 Тогда
	   
	   	ОтсчетЧас = (ПериодТаймера / 3600) - 0.5;
		ОтсчетМинута = ((ПериодТаймера - ОтсчетЧас * 3600) /60)-0.5;
		ОтсчетСекунда = ПериодТаймера  - (ОтсчетЧас*3600) - (ОтсчетМинута*60);
		ЭтотОбъект.ОбновитьОтображениеДанных();
		ЗаписьОткрыта = Истина;
	Иначе
		ОтсчетЧас = 0;
		ОтсчетМинута = 0;
		ОтсчетСекунда = 0;       
		ЗаписьОткрыта = Ложь;
	   
	   КонецЕсли;

	

КонецПроцедуры

&НаКлиенте
Процедура Иду(Команда)
	Если ЗаписьОткрыта Тогда
	ОткрытьФорму("Документ.ЗаявкаНаКорпоратив.Форма.ФормаДокумента");
Иначе
	Сообщить("Запись закрыта");
КонецЕсли;

КонецПроцедуры
